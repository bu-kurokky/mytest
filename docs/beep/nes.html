<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>JS NES SE</title>
<style>
@font-face {
    font-family:'SN';
    src: url(./font/SNchibi2_5.TTF);
}
body{background:#6988fd;}
table{border-spacing:0;margin:0 auto;}
ul{list-style:none;margin:0;padding:0;display:flex;flex-wrap: wrap;justify-content: center; }
li{
    font-family:SN;
    background:#feaa47;
    width:44px;
    color:#cb5916;
    text-shadow: 1px 1px 0px #000;
    border-top:4px solid #cb5916;
    border-left:4px solid #cb5916;
    border-right:4px solid #000;
    border-bottom:2px solid #000;
    margin:0;padding:0;text-align:center;height:44px;line-height:44px;
    font-size:24px;
}

td{width:16px;height:16px;}
#zelda{display:none;}
.black{background:#000 !important;}
.black td{
    background:#000 !important;
}
.c1{background:#f7461c}
.c2{background:#9e8318}
.c3{background:#ffc07b}
.c4{background:#92d050}
.c5{background:#974706}
</style>
</head>
<body>
<main>
<table id="mario">
    <tr class="black">
        <td></td>
        <td></td>
        <td></td>
        <td class="c1"></td>
        <td class="c1"></td>
        <td class="c1"></td>
        <td class="c1"></td>
        <td class="c1"></td>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
    </tr>
    <tr class="black">
        <td></td>
        <td></td>
        <td class="c1"></td>
        <td class="c1"></td>
        <td class="c1"></td>
        <td class="c1"></td>
        <td class="c1"></td>
        <td class="c1"></td>
        <td class="c1"></td>
        <td class="c1"></td>
        <td class="c1"></td>
        <td></td>
    </tr>
    <tr class="black">
        <td></td>
        <td></td>
        <td class="c2"></td>
        <td class="c2"></td>
        <td class="c2"></td>
        <td class="c3"></td>
        <td class="c3"></td>
        <td class="c2"></td>
        <td class="c3"></td>
        <td></td>
        <td></td>
        <td></td>
    </tr>
    <tr class="black">
        <td></td>
        <td class="c2"></td>
        <td class="c3"></td>
        <td class="c2"></td>
        <td class="c3"></td>
        <td class="c3"></td>
        <td class="c3"></td>
        <td class="c2"></td>
        <td class="c3"></td>
        <td class="c3"></td>
        <td class="c3"></td>
        <td></td>
    </tr>
    <tr class="black">
        <td></td>
        <td class="c2"></td>
        <td class="c3"></td>
        <td class="c2"></td>
        <td class="c2"></td>
        <td class="c3"></td>
        <td class="c3"></td>
        <td class="c3"></td>
        <td class="c2"></td>
        <td class="c3"></td>
        <td class="c3"></td>
        <td class="c3"></td>
    </tr>
    <tr class="black">
        <td></td>
        <td class="c2"></td>
        <td class="c2"></td>
        <td class="c3"></td>
        <td class="c3"></td>
        <td class="c3"></td>
        <td class="c3"></td>
        <td class="c2"></td>
        <td class="c2"></td>
        <td class="c2"></td>
        <td class="c2"></td>
        <td></td>
    </tr>
    <tr class="black">
        <td></td>
        <td></td>
        <td></td>
        <td class="c3"></td>
        <td class="c3"></td>
        <td class="c3"></td>
        <td class="c3"></td>
        <td class="c3"></td>
        <td class="c3"></td>
        <td class="c3"></td>
        <td></td>
        <td></td>
    </tr>
    <tr class="black">
        <td></td>
        <td></td>
        <td class="c2"></td>
        <td class="c2"></td>
        <td class="c1"></td>
        <td class="c2"></td>
        <td class="c2"></td>
        <td class="c2"></td>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
    </tr>
    <tr>
        <td></td>
        <td class="c2"></td>
        <td class="c2"></td>
        <td class="c2"></td>
        <td class="c1"></td>
        <td class="c2"></td>
        <td class="c2"></td>
        <td class="c1"></td>
        <td class="c2"></td>
        <td class="c2"></td>
        <td class="c2"></td>
        <td></td>
    </tr>
    <tr>
        <td class="c2"></td>
        <td class="c2"></td>
        <td class="c2"></td>
        <td class="c2"></td>
        <td class="c1"></td>
        <td class="c1"></td>
        <td class="c1"></td>
        <td class="c1"></td>
        <td class="c2"></td>
        <td class="c2"></td>
        <td class="c2"></td>
        <td class="c2"></td>
    </tr>
    <tr>
        <td class="c3"></td>
        <td class="c3"></td>
        <td class="c2"></td>
        <td class="c1"></td>
        <td class="c3"></td>
        <td class="c1"></td>
        <td class="c1"></td>
        <td class="c3"></td>
        <td class="c1"></td>
        <td class="c2"></td>
        <td class="c3"></td>
        <td class="c3"></td>
    </tr>
    <tr>
        <td class="c3"></td>
        <td class="c3"></td>
        <td class="c3"></td>
        <td class="c1"></td>
        <td class="c1"></td>
        <td class="c1"></td>
        <td class="c1"></td>
        <td class="c1"></td>
        <td class="c1"></td>
        <td class="c3"></td>
        <td class="c3"></td>
        <td class="c3"></td>
    </tr>
    <tr>
        <td class="c3"></td>
        <td class="c3"></td>
        <td class="c1"></td>
        <td class="c1"></td>
        <td class="c1"></td>
        <td class="c1"></td>
        <td class="c1"></td>
        <td class="c1"></td>
        <td class="c1"></td>
        <td class="c1"></td>
        <td class="c3"></td>
        <td class="c3"></td>
    </tr>
    <tr>
        <td></td>
        <td></td>
        <td class="c1"></td>
        <td class="c1"></td>
        <td class="c1"></td>
        <td></td>
        <td></td>
        <td class="c1"></td>
        <td class="c1"></td>
        <td class="c1"></td>
        <td></td>
        <td></td>
    </tr>
    <tr>
        <td></td>
        <td class="c2"></td>
        <td class="c2"></td>
        <td class="c2"></td>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
        <td class="c2"></td>
        <td class="c2"></td>
        <td class="c2"></td>
        <td></td>
    </tr>
    <tr>
        <td class="c2"></td>
        <td class="c2"></td>
        <td class="c2"></td>
        <td class="c2"></td>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
        <td class="c2"></td>
        <td class="c2"></td>
        <td class="c2"></td>
        <td class="c2"></td>
    </tr>
</table>

<table id="zelda">
    <tr class="black">
        <td></td>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
    </tr>
    <tr class="black">
        <td></td>
        <td></td>
        <td></td>
        <td class="c4"></td>
        <td class="c4"></td>
        <td class="c4"></td>
        <td class="c4"></td>
        <td class="c4"></td>
        <td class="c4"></td>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
    </tr>
    <tr class="black">
        <td></td>
        <td></td>
        <td class="c4"></td>
        <td class="c4"></td>
        <td class="c4"></td>
        <td class="c4"></td>
        <td class="c4"></td>
        <td class="c4"></td>
        <td class="c4"></td>
        <td class="c4"></td>
        <td></td>
        <td></td>
        <td></td>
    </tr>
    <tr class="black">
        <td class="c3"></td>
        <td></td>
        <td class="c4"></td>
        <td class="c5"></td>
        <td class="c5"></td>
        <td class="c5"></td>
        <td class="c5"></td>
        <td class="c5"></td>
        <td class="c5"></td>
        <td class="c4"></td>
        <td></td>
        <td class="c3"></td>
        <td></td>
    </tr>
    <tr class="black">
        <td class="c3"></td>
        <td></td>
        <td class="c5"></td>
        <td class="c5"></td>
        <td class="c5"></td>
        <td class="c5"></td>
        <td class="c5"></td>
        <td class="c5"></td>
        <td class="c5"></td>
        <td class="c5"></td>
        <td></td>
        <td class="c3"></td>
        <td></td>
    </tr>
    <tr class="black">
        <td class="c3"></td>
        <td class="c3"></td>
        <td class="c5"></td>
        <td class="c3"></td>
        <td class="c4"></td>
        <td class="c3"></td>
        <td class="c3"></td>
        <td class="c4"></td>
        <td class="c3"></td>
        <td class="c5"></td>
        <td class="c3"></td>
        <td class="c3"></td>
        <td></td>
    </tr>
    <tr class="black">
        <td class="c3"></td>
        <td class="c3"></td>
        <td class="c5"></td>
        <td class="c3"></td>
        <td class="c5"></td>
        <td class="c3"></td>
        <td class="c3"></td>
        <td class="c5"></td>
        <td class="c3"></td>
        <td class="c5"></td>
        <td class="c3"></td>
        <td class="c3"></td>
        <td></td>
    </tr>
    <tr class="black">
        <td class="c5"></td>
        <td class="c3"></td>
        <td class="c3"></td>
        <td class="c3"></td>
        <td class="c3"></td>
        <td class="c3"></td>
        <td class="c3"></td>
        <td class="c3"></td>
        <td class="c3"></td>
        <td class="c3"></td>
        <td class="c3"></td>
        <td class="c5"></td>
        <td></td>
    </tr>
    <tr class="black">
        <td class="c5"></td>
        <td class="c5"></td>
        <td class="c4"></td>
        <td class="c3"></td>
        <td class="c3"></td>
        <td class="c5"></td>
        <td class="c5"></td>
        <td class="c3"></td>
        <td class="c3"></td>
        <td class="c4"></td>
        <td class="c4"></td>
        <td class="c5"></td>
        <td></td>
    </tr>
    <tr>
        <td class="c3"></td>
        <td class="c4"></td>
        <td class="c4"></td>
        <td class="c4"></td>
        <td class="c3"></td>
        <td class="c3"></td>
        <td class="c3"></td>
        <td class="c3"></td>
        <td class="c4"></td>
        <td class="c4"></td>
        <td class="c5"></td>
        <td class="c5"></td>
        <td class="c5"></td>
    </tr>
    <tr>
        <td class="c3"></td>
        <td class="c4"></td>
        <td class="c4"></td>
        <td class="c4"></td>
        <td class="c4"></td>
        <td class="c4"></td>
        <td class="c4"></td>
        <td class="c4"></td>
        <td class="c4"></td>
        <td class="c4"></td>
        <td class="c3"></td>
        <td class="c5"></td>
        <td class="c5"></td>
    </tr>
    <tr>
        <td></td>
        <td class="c5"></td>
        <td class="c4"></td>
        <td class="c4"></td>
        <td class="c5"></td>
        <td class="c5"></td>
        <td class="c5"></td>
        <td class="c4"></td>
        <td class="c4"></td>
        <td class="c3"></td>
        <td class="c3"></td>
        <td class="c3"></td>
        <td class="c5"></td>
    </tr>
    <tr>
        <td></td>
        <td class="c4"></td>
        <td class="c5"></td>
        <td class="c5"></td>
        <td class="c5"></td>
        <td class="c4"></td>
        <td class="c5"></td>
        <td class="c5"></td>
        <td class="c5"></td>
        <td class="c5"></td>
        <td class="c3"></td>
        <td class="c3"></td>
        <td class="c3"></td>
    </tr>
    <tr>
        <td></td>
        <td class="c4"></td>
        <td class="c4"></td>
        <td class="c4"></td>
        <td class="c5"></td>
        <td class="c5"></td>
        <td class="c5"></td>
        <td class="c4"></td>
        <td class="c4"></td>
        <td class="c4"></td>
        <td class="c4"></td>
        <td class="c3"></td>
        <td></td>
    </tr>
    <tr>
        <td></td>
        <td></td>
        <td class="c5"></td>
        <td class="c4"></td>
        <td class="c4"></td>
        <td class="c4"></td>
        <td class="c4"></td>
        <td class="c4"></td>
        <td class="c4"></td>
        <td class="c4"></td>
        <td></td>
        <td></td>
        <td></td>
    </tr>
    <tr>
        <td></td>
        <td></td>
        <td class="c5"></td>
        <td class="c5"></td>
        <td class="c5"></td>
        <td></td>
        <td></td>
        <td class="c5"></td>
        <td class="c5"></td>
        <td class="c5"></td>
        <td></td>
        <td></td>
        <td></td>
    </tr>
</table>
</main>
<footer>
<ul>
    <li onclick="soundPlay('1up')">?</li>
    <li onclick="soundPlay('coin')">?</li>
    <li onclick="soundPlay('jamp')">?</li>
    <li onclick="soundPlay('game_boy')">?</li>
    <li onclick="soundPlay('pause')">?</li>
</ul>
<ul>
    <li onclick="soundPlay('item')">?</li>
    <li onclick="soundPlay('pipe')">?</li>
    <li onclick="soundPlay('magic')">?</li>
    <li onclick="soundPlay('dq')">?</li>
    <li onclick="soundPlay('omg')">?</li>
</ul>

</footer>
<script>
const soundPlay = async(sound_type) => {
    const AudioContext = window.AudioContext || window.webkitAudioContext
    const audioContext = new AudioContext()
    const gainNode = audioContext.createGain()
    audioContext.loop = false
    gainNode.connect(audioContext.destination)
    gainNode.gain.value = 0.1
    const oscillator = audioContext.createOscillator()
    oscillator.connect(gainNode)
    // dragon quest
    if (sound_type == "dq"){
        oscillator.type = "square"
        oscillator.frequency.setValueAtTime(2093.004,    audioContext.currentTime)
        oscillator.frequency.setValueAtTime(2793.825,  audioContext.currentTime+0.08)
        oscillator.frequency.setValueAtTime(2093.004,    audioContext.currentTime+0.16)
        oscillator.frequency.setValueAtTime(2793.825,  audioContext.currentTime+0.24)
        oscillator.start()
        oscillator.stop(.32)
        return
    }
    //https://github.com/pendragon-andyh/WebAudio-PulseOscillator
    //こんなの音とりできないよ！
    //https://www.youtube.com/watch?v=Xr6f25s81uM
    if (sound_type == "pipe"){
        let hzs = [
            1318.51, 880.0, 587.329, 391.995, 261.625, 174.614,
            1318.51, 880.0, 587.329, 391.995, 261.625, 174.614, 116.54,
            1318.51, 880.0, 587.329, 391.995, 261.625, 174.614,
            1318.51, 880.0, 587.329, 391.995, 261.625, 174.614, 116.54,
            1318.51, 880.0, 587.329, 391.995, 261.625, 174.614,
            1318.51, 880.0, 587.329, 391.995, 261.625, 174.614, 116.54
        ]
        //types = ["triangle","sine","square",'sawtooth']
        oscillator.type = "square"
        let time = 0
        let i = 0
        //let buff = 0.05
        for(const hz of hzs){
            oscillator.frequency.setValueAtTime(hz, audioContext.currentTime + time)
            if (i > 0 && hz == 116.54 ){
                time += 0.05
            }else{
                time += 0.01
            }
            i++
        }
        oscillator.start()
        oscillator.stop(time+0.01)
        return

    }


    if (sound_type == "item"){
        let hzs = [523.251, 391.995, 523.251, 659.255, 783.99, 1046.502, 783.99, 415.304, 523.251, 622.253, 830.609, 622.253, 830.609, 1046.502, 1244.507, 1479.977, 1244.507, 466.163, 587.329, 698.456, 932.327, 698.456, 932.327, 1174.659, 1396.912, 1864.655, 1396.912]
        oscillator.type = "sawtooth"
        let i = 0
        //let buff = 0.05
        for(const hz of hzs){
            let time = i*0.03 //+ buff
            oscillator.frequency.setValueAtTime(hz, audioContext.currentTime + time)
            i++
        }
        oscillator.start()
        oscillator.stop(0.8)
        return
    }

    if (sound_type == "omg"){
        oscillator.type = "sawtooth"

        oscillator.frequency.setValueAtTime(130.812, audioContext.currentTime)
        oscillator.frequency.setValueAtTime(65.406, audioContext.currentTime + 0.1)
        oscillator.frequency.setValueAtTime(123.47, audioContext.currentTime + 0.2)
        oscillator.frequency.setValueAtTime(61.735, audioContext.currentTime + 0.3)

        oscillator.frequency.setValueAtTime(130.812, audioContext.currentTime + 0.4)
        oscillator.frequency.setValueAtTime(65.406, audioContext.currentTime + 0.5)
        oscillator.frequency.setValueAtTime(123.47, audioContext.currentTime + 0.6)
        oscillator.frequency.setValueAtTime(61.735, audioContext.currentTime + 0.7)
        
        oscillator.frequency.setValueAtTime(130.812, audioContext.currentTime + 0.8)
        oscillator.frequency.setValueAtTime(65.406, audioContext.currentTime + 0.9)
        oscillator.frequency.setValueAtTime(123.47, audioContext.currentTime + 1.0)
        oscillator.frequency.setValueAtTime(61.735, audioContext.currentTime + 1.1)
        
        oscillator.frequency.setValueAtTime(130.812, audioContext.currentTime + 1.2)
        oscillator.frequency.setValueAtTime(65.406, audioContext.currentTime + 1.3)
        oscillator.frequency.setValueAtTime(123.47, audioContext.currentTime + 1.4)
        oscillator.frequency.setValueAtTime(61.735, audioContext.currentTime + 1.5)

        oscillator.frequency.setValueAtTime(87.307, audioContext.currentTime + 1.6)
        
        oscillator.frequency.setValueAtTime(92.498, audioContext.currentTime + 2.0)
        oscillator.frequency.setValueAtTime(97.998, audioContext.currentTime + 2.1)
        oscillator.frequency.setValueAtTime(65.406, audioContext.currentTime + 2.2)

        oscillator.start()
        oscillator.stop(2.8)
        return
    }

    if (sound_type == "coin"){
        oscillator.type = "square"
        oscillator.frequency.setValueAtTime(1975.533, audioContext.currentTime)
        oscillator.frequency.setValueAtTime(2637.02, audioContext.currentTime + 0.08)
        oscillator.start()
        oscillator.stop(.5)
        return
    }
    // gameboy
    if (sound_type == "game_boy"){
        oscillator.type = "square"
        oscillator.frequency.setValueAtTime(1046.502, audioContext.currentTime)
        oscillator.frequency.setValueAtTime(2093.004, audioContext.currentTime + .1)
        oscillator.start()
        oscillator.stop(.7)
        return
    }
    // 1up
    if (sound_type == "1up"){
        oscillator.type = "square"
        oscillator.frequency.setValueAtTime(1318.51,  audioContext.currentTime)
        oscillator.frequency.setValueAtTime(2093.004, audioContext.currentTime+.12)
        oscillator.frequency.setValueAtTime(2637.02,  audioContext.currentTime+.24)
        oscillator.frequency.setValueAtTime(2093.004, audioContext.currentTime+.36)
        oscillator.frequency.setValueAtTime(2349.318, audioContext.currentTime+.48)
        oscillator.frequency.setValueAtTime(3135.963, audioContext.currentTime+.60)
        oscillator.start()
        oscillator.stop(.7)
        return
    }
    if (sound_type == "pause"){
        oscillator.type = "triangle"
        oscillator.frequency.setValueAtTime(2637.02,  audioContext.currentTime)
        oscillator.frequency.setValueAtTime(2093.004, audioContext.currentTime+.1)
        oscillator.frequency.setValueAtTime(2637.02,  audioContext.currentTime+.2)
        oscillator.frequency.setValueAtTime(2093.004, audioContext.currentTime+.3)
        oscillator.start()
        oscillator.stop(.6)
        return
    }
    if (sound_type == "magic"){
        document.getElementById("mario").style.display = 'none'
        document.getElementById("zelda").style.display = 'table'
        oscillator.type = "triangle"
        oscillator.frequency.setValueAtTime(1567.982, audioContext.currentTime)
        oscillator.frequency.setValueAtTime(1479.978, audioContext.currentTime+.2)
        oscillator.frequency.setValueAtTime(1244.507, audioContext.currentTime+.4)
        oscillator.frequency.setValueAtTime(880.000, audioContext.currentTime+.6)
        oscillator.frequency.setValueAtTime(830.609, audioContext.currentTime+.8)
        oscillator.frequency.setValueAtTime(1318.510, audioContext.currentTime+1)
        oscillator.frequency.setValueAtTime(1661.219, audioContext.currentTime+1.2)
        oscillator.frequency.setValueAtTime(2093.005, audioContext.currentTime+1.4)
        oscillator.start()
        oscillator.stop(1.8)
        setTimeout(()=>{
            document.getElementById("mario").style.display = 'table'
            document.getElementById("zelda").style.display = 'none'
        }, 2000)
        return
    }
    if (sound_type == "jamp"){
        let hzs = [220.0,233.081,246.941,261.625,277.182,293.664,311.126,329.627,349.228,369.994,391.995,440]
        oscillator.type = "sawtooth"
        let i = 1
        let buff = 0.15
        oscillator.frequency.setValueAtTime(195.997,audioContext.currentTime)
        oscillator.frequency.setValueAtTime(207.652,audioContext.currentTime+buff)
        for(const hz of hzs){
            let time = i*0.012 + buff
            oscillator.frequency.setValueAtTime(hz, audioContext.currentTime + time)
            i++
        }
        oscillator.start()
        oscillator.stop(0.3)
        return
    }
}
</script>
</body>
</html>

